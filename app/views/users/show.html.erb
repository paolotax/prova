<div class="mt-10 sm:mx-auto sm:w-full sm:max-w-2xl">

    <section class="mt-8">
        <h1 class="text-2xl font-semibold"><%= @user.name %></h1>
        <h2 class="mt-2 text-indigo-900 hover:text-indigo-600"><%= mail_to(@user.email) %></h2>
        <p class="mt-2 text-sm"><%= @user.partita_iva %></p>

        <span class="mt-5 text-xs ">Member Since <%= @user.created_at.strftime("%B %Y") %></span>
    </section>


    
    <section class="mt-8">

        <div class="py-2">
            <div class="flex justify-between border-b-2 border-gray-300">
                <h2 class="font-semibold">La mia zona </h2>
                <%= @user.import_scuole.count %>
            </div>


            <% @mia_zona.each do |zona, count|%>
                
                <div class="bg-white py-4 flex justify-between align-center border-b border-gray-300">
                    <div class="text-sm">
                        <span><%= zona.join " -> " %></span>
                    </div>
                    <div class="pl-2 text-right">
                        <span><%= count %></span>
                    </div>
        
                    <%= button_to "-", rimuovi_scuole_user_path(provincia: zona[1], tipo: zona[2]), method: :delete, 
                        class: "mx-3 h-7 w-7 rounded-full bg-red-600 p-1 text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600" 
                    %>
                </div>
            <% end %>

        </div>


        <%= form_with url: assegna_scuole_user_path(@user), class: "mt-8 flex flex-col" do |f| %>
            <div class="flex flex-row" >
                <div class="">
                    <%= f.label :provincia, class: "label" %>
                    <div>    
                        <%= f.select :provincia, @provincia_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                    </div>
                </div>
                <div class=""> 
                    <%= f.label :grado, class: "label" %>    
                    <div>
                        <%= f.select :grado, @grado_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                    </div>
                </div>
            </div>
            <div class="">
                <%= f.label :tipo, class: "label" %> 
                <div>  
                    <%= f.select :tipo, @tipo_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                </div>
            </div>

            <%= f.button type: "submit", class: "h-7 w-7 rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" do %>
                <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" />
                </svg>            
            <% end%>
        
        <% end %>



    </section>   

    <section>

        <div class="grid grid-col-4">
            <% @miei_editori.each do |editore, count|%>
                <div class="flex flex-col">
                    <span><%= editore %></span>
                    <span><%= count %></span>
                </div>
                <%= button_to "-", rimuovi_editore_user_path(editore: editore), method: :delete, 
                    class: "h-7 w-7 rounded-full bg-red-600 p-1 text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600" 
                %>
            <% end %>
        </div>


        <%= form_with url: assegna_editore_user_path(@user), class: "mt-8 flex flex-row space-x-3 items-baseline" do |f| %>
            <div>
                <%= f.label :editore, class: "label" %>
                <div>    
                    <%= f.select :editore, @editore_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                </div>
            </div>

            <%= f.submit "aggiungi editore", class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
        <% end %>  




    </section>   

</div>

<div class="mt-12 sm:mt-4 sm:flex sm:flex-row-reverse">
    <%= link_to 'Elimina Utente', @user, class: "inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",
                data: { turbo_method: :delete, turbo_confirm: "Vuoi eliminare questo Utente definitivamente!?" } %>

    <%= link_to "Modifica Utente", edit_user_path(@user), class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
</div>

<div class="mt-20 sm:mx-auto sm:w-full sm:max-w-2xl">

    <div>
        <%= form_with url: assegna_scuole_user_path(@user) do |f| %>
            <div class="flex space-x-4 mt-10 max-w-4xl mx-auto">
                <%= render(FancySelect.new( form_name: :provincia, items: @provincia_items, label: "Scegli la provincia" ))  %>
                <%= render(FancySelect.new( form_name: :grado, items: @grado_items, label: "Scegli il grado scolastico" ))  %>     
                <%= render(FancySelect.new( form_name: :tipo, items: @tipo_items, label: "Scegli il tipo scuola" ))  %>     
                <%= f.submit "aggiungi scuole", class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
            </div>
        <% end %>
    </div>  

    <div>
        <%= form_with url: "#" do |f| %>
            <div class="flex space-x-4 mt-10 max-w-4xl mx-auto">
                <%= render(FancySelect.new( form_name: :editore, items: @editore_items, label: "Scegli l'editore" ))  %>
                <%= f.submit "aggiungi editore ", class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
            </div>
        <% end %>
    </div> 
</div>

