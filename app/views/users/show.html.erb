<div class="mt-10 sm:mx-auto sm:w-full sm:max-w-2xl">

    <section class="mt-8">
        <h1><%= @user.name %></h1>
        <h2><%= mail_to(@user.email) %></h2>
        <h2><%= @user.partita_iva %></h2>
        <h2>Scuole assegnate; <%= @user.import_scuole.count %></h2>
        <span>Member Since</span><%= @user.created_at.strftime("%B %Y") %>

    </section>


    
    <section>
        <%= form_with url: assegna_scuole_user_path(@user), class: "mt-8 flex flex-row gap-x-3 items-baseline" do |f| %>
            <div class="flex-0 w-50">
                <%= f.label :provincia, class: "label" %>
                <div>    
                    <%= f.select :provincia, @provincia_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                </div>
            </div>
            <div class="flex-0 w-30"> 
                <%= f.label :grado, class: "label" %>    
                <div>
                    <%= f.select :grado, @grado_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                </div>
            </div>
            <div class="flex-1">
                <%= f.label :tipo, class: "label" %> 
                <div>  
                    <%= f.select :tipo, @tipo_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                </div>
            </div>

            <%= f.button type: "submit", class: "h-7 w-7 rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" do %>
                <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" />
                </svg>            
            <% end%>
        
        <% end %>

        <div class="mt-10 grid grid-cols-4">
            <% @mia_zona.each do |zona, count|%>
                <div class="col-span-2 text-sm">
                    <span><%= zona.join " -> " %></span>
                </div>
                <div class="col-span-1 text-right">
                    <span><%= count %></span>
                </div>

            <% end %>
        </div>

    </section>   

    <section>

        <%= form_with url: assegna_editore_user_path(@user), class: "mt-8 flex flex-row space-x-3 items-baseline" do |f| %>
            <div>
                <%= f.label :editore, class: "label" %>
                <div>    
                    <%= f.select :editore, @editore_items.map{|t| t.label}, {include_blank: true}, class: "field" %>
                </div>
            </div>

            <%= f.submit "aggiungi editore", class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
        <% end %>  

        <div class="grid grid-col-4">
            <% @miei_editori.each do |editore, count|%>
                <div class="flex flex-col">
                    <span><%= editore %></span>
                    <span><%= count %></span>
                </div>
            <% end %>
        </div>


    </section>   

</div>

<div class="mt-12 sm:mt-4 sm:flex sm:flex-row-reverse">
    <%= link_to 'Elimina Utente', @user, class: "inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",
                data: { turbo_method: :delete, turbo_confirm: "Vuoi eliminare questo Utente definitivamente!?" } %>

    <%= link_to "Modifica Utente", edit_user_path(@user), class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
</div>

<div class="mt-20 sm:mx-auto sm:w-full sm:max-w-2xl">

    <div>
        <%= form_with url: assegna_scuole_user_path(@user) do |f| %>
            <div class="flex space-x-4 mt-10 max-w-4xl mx-auto">
                <%= render(FancySelect.new( form_name: :provincia, items: @provincia_items, label: "Scegli la provincia" ))  %>
                <%= render(FancySelect.new( form_name: :grado, items: @grado_items, label: "Scegli il grado scolastico" ))  %>     
                <%= render(FancySelect.new( form_name: :tipo, items: @tipo_items, label: "Scegli il tipo scuola" ))  %>     
                <%= f.submit "aggiungi scuole", class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
            </div>
        <% end %>
    </div>  

    <div>
        <%= form_with url: "#" do |f| %>
            <div class="flex space-x-4 mt-10 max-w-4xl mx-auto">
                <%= render(FancySelect.new( form_name: :editore, items: @editore_items, label: "Scegli l'editore" ))  %>
                <%= f.submit "aggiungi editore ", class: "mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto" %>
            </div>
        <% end %>
    </div> 
</div>

