<div class="sticky top-20 z-10">
	<%= render Heading::WithActionsComponent.new(level: 'h2') do |heading| %>
		

        <% heading.with_description do %>
           
            <%= tag.div class: "flex items-center -ml-3" do %>  
                <%= component 'tax_button',
                    svg_file: "icon-arrow-left.svg",
                    color: "transparent",
                    url: giorno_path(giorno: (@giorno - 1.day).to_s),
                    data_attr: { controller: "link-modifier", link_modifier_target: "link" } %>
                
            

                <%= component 'tax_button',
                    svg_file: "icon-arrow-right.svg",
                    color: "transparent",
                    url: giorno_path(giorno: (@giorno + 1.day).to_s),
                    data_attr: { controller: "link-modifier", link_modifier_target: "link" } %>
            <% end %>
        <% end %>

		<% heading.with_action do %>	
	        <%= component 'tax_button',
				caption: 'Percorso', 
				svg_file: 'icon-path-rounded-square.svg',
				color: "transparent",
				url: url_for( controller: "mappe", action: "calcola_percorso_ottimale", method: :get, params: { giorno: @giorno.to_s }) %>
			<% end %>

		<% heading.with_action do %>
        	<%= component 'tax_button',
				caption: "Google Maps!",
				svg_file: "icon-truck.svg",
				color: "transparent",
				url: create_google_maps_link(@indirizzi),
				data_attr: { controller: "link-modifier", link_modifier_target: "link" },
				target: "_blank" %>
		<% end %>

		<% heading.with_action do %>
			<%= component 'tax_button',
				caption: "Agenda",
				svg_file: "icon-calendar.svg",
				color: "yellow",
				url: agenda_path(giorno: (@giorno).to_s),
                data_attr: { controller: "link-modifier", link_modifier_target: "link" } %>
		<% end %>


		<%= I18n.l( @giorno.to_date, format: :long, locale: :it ) %>

	<% end %>
</div>

<%= tag.div class: "group show-navigator",
    data: {
        controller: "tax-sortable",
        tax_sortable_group_value: "calendar",
        tax_sortable_param_name_value: "position",
        tax_sortable_data_tappa: "#{@giorno.to_s}"  
    } do %>
    <%= render partial: "tappe/tappa", collection: @tappe, as: :tappa, locals: { with_checkbox: false } %>
<% end %>

<div data-controller="tax-reveal"> 
    <div class="w-full flex">
        <%= js_map get_coordinates(@tappe), controls: true, tooltips: { hover: false, html: true } %>
    </div>
    <div class="w-full flex justify-between">


    </div>
</div>

<% unless @appunti_del_giorno.empty? %>
    <%= tag.div "Appunti di OGGI:", class: "text-xl font-bold p-4" %>
    <div id="appunti-lista" role="list" class="py-5 grid grid-cols-1 gap-x-6 gap-y-8 lg:grid-cols-2 2xl:grid-cols-3 xl:gap-x-8">
			
        <% @appunti_del_giorno.each do |appunto| %>
            <%= render partial: "appunti/appunto", locals: { appunto: appunto } %>
        <% end %>
    </div>
<% end %>
