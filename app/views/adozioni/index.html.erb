<%= heading do %>	
	
    <%= h1 {"Si sboccia!!!"} %>

    

    <%= tag.div class: "pl-4 flex flex-col-reverse justify-center gap-2 sm:flex-row sm:justify-between sm:align-center sm:gap-4" do %>


        <%= render TaxButton.new(
                caption: "Excel",
                svg_file: "icon-excel-bis.svg",
                color: "green",
                url: url_for( controller: "adozioni", action: "index", format: :xlsx, params: request.query_parameters )
        ) %>

        <%= render TaxButton.new(
                caption: "Totali",
                svg_file: "icon-calculator.svg",
                color: "yellow",
                url: url_for( controller: "adozioni", action: "riepilogo", params: [] )
        ) %>
        
        <%= render TaxButton.new(
                caption: "Sbocci?",
                svg_file: "icon-plus.svg",
                color: "blue",
                url: url_for( controller: "adozioni", action: "new", model: @adozione ),
                data_attr: { turbo_frame: :modal, action: "click->dialog#open" }
        ) %>

    <% end %>

<% end %>

<%= tag.div class: "flex space-x-2 p-2" do %>
    
    <%= render BadgeComponent.new(text: "#{ pluralize @adozioni.count, "sezione", "sezioni"}", color: "blue", transparent_background: false) %>
    
    <%= render TaxButton.new(
            caption: "Adozioni",
            svg_file: "icon-cash.svg",
            color: "pink",
            url: "/adozioni?tipo=adozioni" 
    ) %>
            <%= render TaxButton.new(
            caption: "Vendite",
            svg_file: "icon-cash.svg",
            color: "cyan",
            url: "/adozioni?tipo=vendite" 
    ) %>
<% end %>

<%= turbo_frame_tag :search_results, data: { controller: 'tax-checkbox-select-all' } do %>

    <%= render 'form_multi' %>

    <%= tag.div id: "adozioni-lista", class: "sm:px-2" do %>
        <p class="only:block hidden py-32 px-4 text-center xl:col-span-2">Whoops! Non ci sono righe </p>
        
        <%= render @page.records %>

        <% unless @page.last? %>
            <%= turbo_frame_tag "load_more", src: adozioni_path(                              
                                    search: params[:search], 
                                    page: @page.next_param, 
                                    tipo: params[:tipo],
                                    classe: params[:classe],
                                    disciplina: params[:disciplina],
                                    editore: params[:editore],
                                    codice_isbn: params[:codice_isbn],
                                    filter: params[:filter],
                                    format: :turbo_stream
                              ), loading: :lazy do %>
                <%= render 'shared/lazy_loading' %>
            <% end %>
        <% end %>
    <% end %>
<% end %>



