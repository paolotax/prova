<%= form_with model: adozione, class: "rounded-lg py-4 px-2 bg-gray-200" do |form| %>
	
	<% if adozione.errors.any? %>
		<%= tag.div id: "error_explanation", class: "bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mt-3" do %>
			<h2><%= pluralize(adozione.errors.count, "error") %> prohibited this adozione from being saved:</h2>
			<ul>
				<% adozione.errors.each do |error| %>
					<li><%= error.full_message %></li>
				<% end %>
			</ul>
		<% end %>
	<% end %>

	<%= tag.div class: "flex items-center space-x-2" do %>
		<%= form.label :team, "Le maestre" %>
		<%= form.text_field :team, 
			class: "block shadow rounded-md border border-gray-200 outline-none px-2 py-1.5" %>
	<% end %>
		
    <%= tag.div class: " w-full flex space-x-2", data: { controller: "tax-combobox-select" } do %>        
        <%= turbo_frame_tag :combo_classi do %>
            <%= render partial: "classi/combobox_classi", 
                locals: { scuola: adozione.scuola, classe_ids: [adozione.classe_id] } %>
        <% end %>
        della scuola:
			
		<%= tag.span adozione.nome_scuola, class: "font-bold" %>
    <% end %>

	<%= tag.div class: "flex items-center space-x-2" do %>
        <%= tag.div class: "" do %>
            <%= form.combobox :stato_adozione, 
                    current_user.adozioni.stato_adozione, 
                    name_when_new: "adozione[stato_adozione]", 
                    label: "che fanno?",
                    placeholder: "adottano o comprano?" %>
        <% end %>

        <%= tag.div class: "" do %>
            <%= form.combobox :libro_id, current_user.libri.order(:titolo),
                    label: "il testo:",
                    placeholder: "seleziona il titolo o inseriscine uno nuovo...",
                    name_when_new: "adozione[new_libro]" %>
        <% end %>

        <%= tag.div class: "" do %>
            <%= form.label :numero_copie, "copie:" %>
            <%= form.number_field :numero_copie, class: "block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full" %>
        <% end %>
    <% end %>

    <%= tag.div class: "flex items-center justify-between items-center" do %>
        <%= tag.div class: "" do %>
            <%= form.label :note %>
            <%= form.text_area :note, rows: 3, class: "block shadow rounded-md border border-gray-200 outline-none px-3 py-2 mt-2 w-full sm:w-[42rem]" %>
        <% end %>
        <%= tag.div class: "" do %>
            <%= form.submit "salva", class: "bg-blue-600 rounded-lg py-1.5 px-2 text-white inline-block font-small cursor-pointer" %>
            <%= link_to "annulla", adozione, class: " bg-gray-600 rounded-lg py-1.5 px-2 text-white inline-block font-small cursor-pointer"%>
        <% end %>
    <% end %>
<% end %>
