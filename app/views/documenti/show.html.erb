<div class="mx-auto md:w-10/12 w-full">
  
  <%= render Heading::WithActionsComponent.new(level: 'h2') do |heading| %>

      <%# <% heading.with_leader do %>
          <%# <%= render AvatarComponent.new(user: OpenStruct.new(name: "Ordine Cliente"), size: "xl") %>
      <%# <% end %>
      
      <% heading.with_description(css: "bg-red-500") {"nr #{@documento.numero_documento} del #{@documento.data_documento&.strftime('%d-%m-%y')}" } %>

      <% heading.with_action do %>
          <%= render TaxButton.new(
                  caption: "Elimina",
                  svg_file: "icon-trash-real.svg",
                  color: "red",
                  url: url_for( controller: "documenti", action: "destroy", model: @documento ),
                  data_attr: { turbo_method: :delete, turbo_confirm: "Sei sicuro?" }
          ) %>
      <% end %>

      <% heading.with_action do %>
          <%= render TaxButton.new(
                  caption: "Documenti",
                  svg_file: "icon-arrow-long-left.svg",
                  color: "white",
                  url: url_for( controller: "documenti", action: "index" )
          ) %>
      <% end %>

      <% heading.with_action do %>
          <%= render TaxButton.new(
                  caption: "Modifica",
                  svg_file: "icon-pencil.svg",
                  color: "blue",
                  url: url_for( controller: "documenti", action: "edit", model: @documento )
          ) %>
      <% end %>

      <%= @documento.causale %>

  <% end %>







  <div class="sm:flex sm:items-center">
    
    <div class="sm:flex-auto">
      <h1 class="text-base font-semibold leading-6 text-gray-900">
          <%= @documento.clientable&.denominazione %></h1>

    </div>
    <div class="mt-4 sm:ml-16 sm:mt-0 sm:flex-none" >
      <%= link_to_previous_page("<- indietro") %>
    </div>  
  </div>

  <div class="mx-4 mt-8 flow-root sm:mx-0">
    <table class="min-w-full">
      <colgroup>
        <col class="w-full sm:w-1/2">
        <col class="sm:w-1/8">
        <col class="sm:w-1/8">
        <col class="sm:w-1/8">
        <col class="sm:w-1/6">
      </colgroup>
      
      <thead class="border-b border-gray-300 text-gray-900">
        <tr>
          <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Titolo</th>
          <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Prezzo</th>
          <th scope="col" class="px-3 py-3.5 text-right text-sm font-semibold text-gray-900">Quantita</th>
          <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Sconto</th>
          <th scope="col" class="py-3.5 pl-3 pr-4 text-right text-sm font-semibold text-gray-900 sm:pr-0">Importo</th>
        </tr>
      </thead>
      
      <tbody>

        <% @documento.righe.each do |riga| %> 
          <%=  render partial: "righe/riga", locals: { riga: riga } %>    
        <% end %>
      
      </tbody>
      
      <tfoot>
        <tr>
          <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-normal text-gray-500 sm:table-cell sm:pl-0">Totale copie</th>
          <th scope="row" class="pl-4 pr-3 pt-4 text-left text-sm font-normal text-gray-500 sm:hidden">Totale copie</th>
          <td class="pl-3 pr-4 pt-4 text-right text-sm text-gray-500 sm:pr-0">
            <%= @documento.righe.sum(&:quantita) %>
          </td>
        </tr>
        <tr>
          <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-semibold text-gray-900 sm:table-cell sm:pl-0">Totale importo</th>
          <th scope="row" class="pl-4 pr-3 pt-4 text-left text-sm font-semibold text-gray-900 sm:hidden">Totale importo</th>
          <td class="pl-3 pr-4 pt-4 text-right text-sm font-semibold text-gray-900 sm:pr-0">
            <%= number_to_currency @documento.righe.sum(&:importo), locale: :it %>
          </td>
        </tr>
      </tfoot>
    </table>



  </div>

</div>

