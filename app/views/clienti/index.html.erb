<%= render Heading::WithActionsComponent.new do |heading| %>
    
    <% heading.with_action do %>
        <%= form_for @import, url: clienti_importer_index_path, method: :post, multipart: :true do |f| %>
            <%= tag.div class: "hidden md:flex md:flex-row p-4 bg-gray-200 rounded-md" do %>
                <%= f.file_field :file, accept: 'text/csv' %>
                <%= component('button', busy_content_css: 'flex [[disabled]_&]:opacity-0') do |button| %>
                    <% button.with_busy_content(css: "absolute inset-0 w-full justify-center items-center") do %>
                        <svg stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="size-4"><style>.spinner{transform-origin:center; animation:spinner_outside 2s linear infinite}.spinner circle{stroke-linecap:round;animation:spinner_inside 1.5s ease-in-out infinite}@keyframes spinner_outside{100%{transform:rotate(360deg)}}@keyframes spinner_inside{0%{stroke-dasharray:0 150;stroke-dashoffset:0}47.5%{stroke-dasharray:42 150;stroke-dashoffset:-16}95%,100%{stroke-dasharray:42 150;stroke-dashoffset:-59}}</style><g class="spinner"><circle cx="12" cy="12" r="9.5" fill="none" stroke-width="2"></circle></g></svg>
                    <% end %>
                    File
                    <%= inline_svg_tag "icon-paper-clip.svg" %>                   
                <% end %>
            <% end %>
        <% end %>
    <% end %>

    <% heading.with_action do %>
        <%= component 'tax_button',
                caption: "Excel",
                svg_file: "icon-excel-bis.svg",
                color: "green",
                url: url_for( controller: "clienti", action: "index", format: :xlsx, params: request.query_parameters ) %>
    <% end %>
    <%# heading.with_action do %>
        <%#= component 'tax_button',
                caption: "Stats",
                svg_file: "icon-chart-bar.svg",
                color: "white",
                url: url_for( controller: "adozioni", action: "riepilogo", params: [] ) %>
    <%# end %>
    <% heading.with_action do %>
        <%= component 'tax_button',
                caption: "Nuovo",
                svg_file: "icon-plus.svg",
                color: "blue",
                url: url_for( controller: "clienti", action: "new", model: @cliente ) %>
    <% end %>
    
    <%= h1 {"Clienti"} %>

<% end %>


<%= turbo_frame_tag "search_results" do %>

  <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">

      <% @clienti.each do |cliente| %>
        <%= render partial: "clienti/cliente", locals: { cliente: cliente }%>
      <% end %>
    <!-- More people... -->
  </ul>

<% end %>


