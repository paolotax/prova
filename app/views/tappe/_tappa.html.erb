 <%# locals: ( tappa:, with_checkbox: true ) -%>

<%= tag.li id: dom_id(tappa),
        class: [ 
            "group px-2 py-1.5 grid  bg-white border-b max-w-72 rounded-md shadow-md items-center": true,
            "grid-cols-6 gap-2 mb-2": !with_checkbox,
            "grid-cols-7": with_checkbox
        ],
         data: { sortable_update_url: sort_tappa_path(tappa) } do %>

    <% if with_checkbox %>
        <%= check_box_tag "tappa_ids[]", tappa.id, nil, {
                        multiple: true,
                        form: :bulk_update_tappe_form,
                        checked: false,
                        class: "rounded rounded-full border-2 border-gray-300 h-5 w-5 m-auto col-span-1",
                        data: { tax_checkbox_select_all_target: 'checkbox' }
                        } %>
    <% end %>

    <%= tag.div class: "#{ with_checkbox ? "" : "col-start-1" } col-span-1" do %> 
        <%= render partial: "tappe/tappa_menu", locals: { tappa: tappa } %>
    <% end %>
        

    <%= tag.div class: [
            "text-xs font-bold text-gray-600": true,
            "col-span-4": with_checkbox,
            "col-span-5": !with_checkbox
        ] do %>  
        <%= render partial: "clientable/#{tappa.tappable.class.name.underscore}_card", locals: { clientable: tappa.tappable } %>
        <%= tag.div tappa&.giro&.titolo, class: "text-xs  font-bold text-gray-600" %>
        <%= tag.div tappa.titolo, class: "pt-2 text-xs italic font-semibold text-gray-400" %>  
    <% end %>


    
<% end %>
