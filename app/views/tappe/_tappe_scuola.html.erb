<%= turbo_frame_tag :tappe_list, class: "group show-scuola w-full px-2 space-y-4" do %>
	<% if tappe.any? %>
		<% tappe_per_anno = tappe.group_by { |t| t.data_tappa&.year }.sort %>

		<% tappe_per_anno.each do |anno, tappe_anno| %>
			<!-- Grid completa a 12 colonne per ogni anno -->
			<div class="grid grid-cols-12 gap-2">
				<!-- Colonna 1: Anno -->
				<div class="col-span-1 flex items-start justify-center pt-2">
					<div class="text-3xl font-bold text-gray-300 sticky top-24">
						<%= anno %>
					</div>
				</div>

				<!-- Colonne 2-12: Tappe dell'anno -->
				<% tappe_anno.sort_by(&:data_tappa).each do |tappa| %>
					<div class="<%= tappa.giri.any? ? 'col-span-2' : 'col-span-1' %>">
						<%= render partial: "tappe/tappa", locals: { tappa: tappa, with_checkbox: false, with_handle: false } %>
					</div>
				<% end %>
			</div>
		<% end %>

	<% else %>
		<div class="flex justify-center items-center py-8 text-gray-500">
			Nessuna tappa per questa scuola
		</div>
	<% end %>
<% end %>
